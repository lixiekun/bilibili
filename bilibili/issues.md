# Vision Pro B站客户端 — 问题 & 解决方案

## 问题 1 — 窗口大小调整时，视频 Item 比例也变了  
**现象**  
在 visionOS 环境下，当应用窗口调整大小时，视频预览 Item 的宽高比例发生变化，导致画面拉伸或压缩，用户体验下降。  

**分析**  
- tvOS 等环境中视频预览常用固定比例。  
- 当前 Item 布局没有锁定比例，导致随着容器尺寸变化而变形。  
- 用户期待「比例不变 + 大小变化」而非「比例也变」。  

**解决方案**  
- 使用 SwiftUI 的 `.aspectRatio(…)` 或类似机制，锁定 Item 宽高比。  
- 窗口／容器变化时仅调整 frame ／ scale，而非比例。  
- 预设多个 尺寸断点（小／中／大），在跨断点切换样式。  
- 限制最大宽度／高度，保持比例显示。  

---

## 问题 2 — 推荐页面滑到底没有刷新且内容不相关  
**现象**  
推荐页面滑到底后无新内容载入，仅显示固定条数；显示视频与用户偏好不符，更像热门榜单。  

**分析**  
- 缺少分页或无限滚动机制。  
- 推荐逻辑仅基于热门，并无用户偏好加持。  
- 在 visionOS 的大屏环境中，滑动期待更多新内容。  

**解决方案**  
- 增加分页加载（滑到底触发 API 下一页）。  
- 支持下拉刷新。  
- 后台接口需支持“为你推荐”逻辑：用户标签、观看历史、关注频道。  
- UI 上做分区（如“为你推荐”“热门”“关注番”）。  
- 加“切换推荐维度”按钮。  

---

## 问题 3 — 关注列表滑动重复视频替换  
**现象**  
关注列表滑动过程中出现重复视频条目，视觉上像是列表在替换而不是加载新条目。  

**分析**  
- 数据分页逻辑可能出错或返回重复 videoId。  
- 前端未做 deduplicate 处理。  
- SwiftUI 列表重用机制可能造成条目错位。  

**解决方案**  
- 接口请求后在前端用 Set/Dictionary 去重。  
- 确认分页参数正确（page/cursor）避免重复页。  
- 列表写法使用唯一键：`ForEach(videos, id: \.videoId) { … }`。  
- 提供“最新刷新”提示，滑动起始位滚动至顶部。  

---

## 问题 4 — 视频详情页“相关视频推荐”使用假数据  
**现象**  
在视频详情页面，下方的推荐区域显示的可能是固定或假数据而非真实推荐。  

**分析**  
- 假数据降低用户信任和体验。  
- 推荐逻辑应基于 videoId、用户偏好、标签、观看历史。  
- 在 visionOS 中，“下一个播放”尤为重要，推荐模块需真实可靠。  

**解决方案**  
- 接入真实 后台 “相关视频”接口；传 videoId ／标签等参数。  
- UI 上显示加载状态（Skeleton 或动画）。  
- 推荐策略：作者相同、系列同属、标签相近、用户未看。  
- 增加按钮如“播放全部”“稍后观看”。  
- 在 visionOS 里可用横向滚动卡片或空间浮动列展示推荐。  

---

## 总结  
以上四大问题从 UI 布局、数据加载、推荐逻辑、用户体验四个维度分别分析了原因与落地方案。下一步建议在你的 visionOS B站客户端中，按照优先级逐条实现：  
1. 锁定视频 Item 比例（影响即刻体验）  
2. 优化推荐列表的分页机制  
3. 修复关注列表的重复条目问题  
4. 接入真实「相关推荐」接口，提升内容质量  

按部就班推进，你的客户端体验会明显提升。  